{% extends 'base.html' %}
{% block title %}IMSUK - {{ store.name }}{% endblock %}
{% block content %}
<h2>{{ store.name }}</h2>
<div class="row">
    <div class="col-md-6">
        {% if store.store_image %}
        <img src="{{ store.store_image.url }}" class="img-detail rounded" alt="{{ store.name }}" aria-describedby="store-description">
        {% else %}
        <img src="https://via.placeholder.com/400x300" class="img-detail rounded" alt="Placeholder">
        {% endif %}
        {% if store.additional_images %}
        <div class="mt-3">
            <h5>Additional Images</h5>
            <div class="d-flex flex-wrap">
                {% for img in store.additional_images %}
                <img src="{{ img }}" class="img-thumbnail me-2 mb-2" alt="Additional image for {{ store.name }}" style="max-width: 100px;">
                {% endfor %}
            </div>
        </div>
        {% endif %}
    </div>
    <div class="col-md-6">
        <p id="store-description">{{ store.description }}</p>
        <p>
            {% if store.discount_percentage > 0 %}
            <span class="badge badge-discount">{{ store.discount_percentage }}% Off</span>
            <span class="text-decoration-line-through">${{ store.price }}</span>
            <strong>${{ store.discounted_price|floatformat:2 }}</strong>
            {% else %}
            <strong>${{ store.price|floatformat:2 }}</strong>
            {% endif %}
        </p>
        <p><strong>Available Quantity:</strong> {{ store.quantity_available }}</p>
        <p><strong>Available From:</strong> {{ store.available_from|date:"F d, Y H:i" }}</p>
        <p><strong>Available Until:</strong> {{ store.available_until|date:"F d, Y H:i" }}</p>
        {% if store.is_surprise_box %}
        <p><strong>Surprise Box:</strong> Yes</p>
        {% endif %}
        {% if store.allergen_ingredients %}
        <p><strong>Allergens:</strong> {{ store.allergen_ingredients }}</p>
        {% endif %}
        <form method="post">
            {% csrf_token %}
            <div class="mb-3">
                <label for="quantity" class="form-label">Quantity</label>
                <input type="number" class="form-control" id="quantity" name="quantity" value="1" min="1" max="{{ store.quantity_available }}">
            </div>
            <button type="submit" class="btn btn-primary">Add to Cart</button>
        </form>
        {% if messages %}
        <div class="mt-3">
            {% for message in messages %}
            <div class="alert {% if message.tags == 'success' %}alert-success{% else %}alert-danger{% endif %}">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}